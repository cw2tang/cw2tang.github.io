<!DOCTYPE html>
<html>
	<head>
		<title>价格计算器</title>
		<link rel="stylesheet" type="text/css" href="../css/main.css">
	</head>
	<body>
		<div class="container">
    		<div class="blurb">
                <h1>价格计算器</h1>
                
                <table>
		    <tr>
                        <td class="required">***红色必须填写</td>
                    </tr>
		    <br>
                    <tr>
                        <td class="required">原先购买税前价格(Cost)</td>
                        <td><input type="text" id="A"></td>
                    </tr>
                    <tr>
                        <td class="required">原先销售税前价格(Sale)</td>
                        <td><input type="text" id="B"></td>
                    </tr>
                    <tr>
                        <td>原先的利润($)</td>
                        <td><input type="text" id="C"></td>
                    </tr>
                    <tr>
                        <td>原先的利润率(1.00=100%)</td>
                        <td><input type="text" id="D"></td>
                    </tr>
                    <tr>
                        <td>销售涨价幅度($)</td>
                        <td><input type="text" id="E"></td>
                    </tr>
                    <tr>
                        <td class="required">涨价后的购买税前价格(Cost)</td>
                        <td><input type="text" id="F"></td>
                    </tr>
                    <tr>
                        <td>涨价后的销售税前价格(Sale)</td>
                        <td><input type="text" id="G"></td>
                    </tr>
                    <tr>
                        <td>涨价后的销售税后价格</td>
                        <td><input type="text" id="H"></td>
                    </tr>
                    <tr>
                        <td>涨价后的利润($)</td>
                        <td><input type="text" id="I"></td>
                    </tr>
                    <tr>
                        <td>涨价后的利润率(1.00=100%)</td>
                        <td><input type="text" id="J"></td>
                    </tr>
                </table><br>
                
                <button type="button" onclick="clearAll()">Clear</button>
                <button type="button" onclick="printresult()">Calculate</button>

            </div><!-- /.blurb --> 
        </div><!-- /.container -->
        
        
		<!-- <footer>
    		<ul>
        		<li><a href="mailto:gt00unit@gmail.com">email</a></li>
        		<li><a href="https://github.com/cw2tang">github.com/cw2tang</a></li>
			</ul>
        </footer> -->
        <!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> -->
        <script>
            var a,b,c,d,e,f,g,h,i,j = 0;

            function myFunction(p1, p2) {
              return p1 * p2;
            }
            document.getElementById("demo").innerHTML = myFunction(4, 3);

            function clearAll(){
                document.getElementById("A").value = '';
                document.getElementById("B").value = '';
                document.getElementById("C").value = '';
                document.getElementById("D").value = '';
                document.getElementById("E").value = '';
                document.getElementById("F").value = '';
                document.getElementById("G").value = '';
                document.getElementById("H").value = '';
                document.getElementById("I").value = '';
                document.getElementById("J").value = '';
            }

            function init(){
                a = parseInt(document.getElementById("A").value);
                b = parseInt(document.getElementById("B").value);
                c = parseInt(document.getElementById("C").value);
                d = parseInt(document.getElementById("D").value);
                e = parseInt(document.getElementById("E").value);
                f = parseInt(document.getElementById("F").value);
                g = parseInt(document.getElementById("G").value);
                h = parseInt(document.getElementById("H").value);
                i = parseInt(document.getElementById("I").value);
                j = parseInt(document.getElementById("J").value);

                if(isNaN(i) && isNaN(j)){
                    calculateAll(0);
                }else if(isNaN(e)){
                    if(i > 0 && j > 0){
                        alert("请输入涨价后的利润【或者】利润率(二选一)");
                    }
                    calculateAll(1);
                }else{
                    alert("如果有填写涨价后利润或者利润率，请保留销售涨价幅度空白");
                }
            }
            function calculateC(){
                c = b - a;
            }
            function calculateD(){
                d = (b - a)/a;
            }

            function calculateAll(boo){
                calculateC();
                calculateD();

                if(boo == 0){
                    calculateGJ();
                }else if(boo == 1){
                    calculateGE();
                }
            }

            
            
            //given E, calculate G and I/J
            function calculateGJ(){
                g = b + e;
                h = g * 1.13;
                i = g - f;
                j = (g - f)/f;
            }

            //given I/J, calculate G and E
            function calculateGE(){
                if(isNaN(i)){
                    g = (j * f) + f;
                    h = g * 1.13;
                    e = g - b;
                    i = g - f;
                }else if(isNaN(j)){
                    g = i + f;
                    alert("g=" + g);
                    h = g * 1.13;
                    e = g - b;
                    j = i / f;
                }else{
                    alert("Error");
                }
            }

            function printresult(){
                init();
                document.getElementById("A").value = a;
                document.getElementById("B").value = b;
                document.getElementById("C").value = c;
                document.getElementById("D").value = d;
                document.getElementById("E").value = e;
                document.getElementById("F").value = f;
                document.getElementById("G").value = g;
                document.getElementById("H").value = h;
                document.getElementById("I").value = i;
                document.getElementById("J").value = j;
            }
        </script>
	</body>
</html>
